{"version":3,"sources":["../src/rowstable.js"],"names":["define","$","undohide","Rowstable","rootselector","elementRoot","data","deluttons","find","init","bindEventHandlers","prototype","handleDeletion","item","e","thisObj","column","hide","undobutton","clone","html","click","handleUndoDeletion","before","stopPropagation","show","remove"],"mappings":"AAuBAA,OAAM,wBAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,IAGvBC,CAAAA,CAAQ,CAAGD,CAAC,CAAC,8CAAD,CAHW,CAUvBE,CAAS,CAAG,SAASC,CAAT,CAAuB,CACnC,KAAKC,WAAL,CAAmBJ,CAAC,CAACG,CAAD,CAApB,CACA,GAAI,CAAC,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,WAAtB,CAAL,CAAyC,CACrC,KAAKC,SAAL,CAAiB,KAAKF,WAAL,CAAiBG,IAAjB,CAAsB,kBAAtB,CAAjB,CAEA,KAAKC,IAAL,GAEA,KAAKC,iBAAL,GACA,KAAKL,WAAL,CAAiBC,IAAjB,CAAsB,WAAtB,CAAkC,MAAlC,CACH,CACJ,CApB0B,CA2B3BH,CAAS,CAACQ,SAAV,CAAoBF,IAApB,CAA2B,UAAW,CAErC,CAFD,CAYAN,CAAS,CAACQ,SAAV,CAAoBC,cAApB,CAAqC,SAASC,CAAT,CAAeC,CAAf,CAAkB,IAC/CC,CAAAA,CAAO,CAAG,IADqC,CAE/CC,CAAM,CAAGH,CAAI,CAACP,IAAL,CAAU,WAAV,CAFsC,CAGnDS,CAAO,CAACV,WAAR,CAAoBG,IAApB,CAAyB,QAAQQ,CAAjC,EAAyCC,IAAzC,GAEA,GAAIC,CAAAA,CAAU,CAAGhB,CAAQ,CAACiB,KAAT,EAAjB,CACAD,CAAU,CAACE,IAAX,CAAgBJ,CAAhB,EACAE,CAAU,CAACZ,IAAX,CAAgB,eAAhB,CAAgCU,CAAhC,EACAE,CAAU,CAACG,KAAX,CAAiB,SAASP,CAAT,CAAY,CACzB,MAAOC,CAAAA,CAAO,CAACO,kBAAR,CAA2BrB,CAAC,CAAC,IAAD,CAA5B,CAAoCa,CAApC,CACV,CAFD,EAGAC,CAAO,CAACV,WAAR,CAAoBkB,MAApB,CAA2BL,CAA3B,EACAJ,CAAC,CAACU,eAAF,GACA,QACH,CAdD,CAwBArB,CAAS,CAACQ,SAAV,CAAoBW,kBAApB,CAAyC,SAAST,CAAT,CAAeC,CAAf,CAAkB,IACnDC,CAAAA,CAAO,CAAG,IADyC,CAEnDC,CAAM,CAAGH,CAAI,CAACP,IAAL,CAAU,eAAV,CAF0C,CAGvDS,CAAO,CAACV,WAAR,CAAoBG,IAApB,CAAyB,QAAQQ,CAAjC,EAAyCS,IAAzC,GAEAZ,CAAI,CAACa,MAAL,GACAZ,CAAC,CAACU,eAAF,GACA,QACH,CARD,CAeArB,CAAS,CAACQ,SAAV,CAAoBD,iBAApB,CAAwC,UAAW,CAC/C,GAAIK,CAAAA,CAAO,CAAG,IAAd,CAGA,KAAKR,SAAL,CAAec,KAAf,CAAqB,SAASP,CAAT,CAAY,CAC7B,MAAOC,CAAAA,CAAO,CAACH,cAAR,CAAuBX,CAAC,CAAC,IAAD,CAAxB,CAAgCa,CAAhC,CACV,CAFD,CAGH,CAPD,CASA,MAAOX,CAAAA,CACV,CAxFK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Implement a records dinamic table with column deletion buttons\n *\n * @module     tool_lp/rowstable\n * @package    core\n * @copyright  2019 Ferran Recio Calder√≥\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n    // Private variables and functions.\n    /** @var {String} undohide The html for undoing column hide */\n    var undohide = $('<span class=\"badge badge-pill m-1\"></span>');\n\n    /**\n     * Constructor\n     *\n     * @param {String} selector\n     */\n    var Rowstable = function(rootselector) {\n        this.elementRoot = $(rootselector);\n        if (!this.elementRoot.data('tableinit')) {\n            this.deluttons = this.elementRoot.find('[data-delcolumn]');\n\n            this.init();\n\n            this.bindEventHandlers();\n            this.elementRoot.data('tableinit','true');\n        }\n    };\n    // Public variables and functions.\n\n    /**\n     * Init this tree\n     * @method init\n     */\n    Rowstable.prototype.init = function() {\n        // not for now\n    };\n\n    /**\n     * Handle a filter apply.\n     *\n     * @method handleClick\n     * @param {Object} filter is the jquery id of the filter element\n     * @param {Event} e The event.\n     * @return {Boolean}\n     */\n    Rowstable.prototype.handleDeletion = function(item, e) {\n        var thisObj = this;\n        var column = item.data('delcolumn');\n        thisObj.elementRoot.find('.col_'+column).hide();\n        // show undo button\n        var undobutton = undohide.clone();\n        undobutton.html(column);\n        undobutton.data('undodelcolumn',column);\n        undobutton.click(function(e) {\n            return thisObj.handleUndoDeletion($(this), e);\n        });\n        thisObj.elementRoot.before(undobutton);\n        e.stopPropagation();\n        return false;\n    };\n\n    /**\n     * Handle a filter apply.\n     *\n     * @method handleClick\n     * @param {Object} filter is the jquery id of the filter element\n     * @param {Event} e The event.\n     * @return {Boolean}\n     */\n    Rowstable.prototype.handleUndoDeletion = function(item, e) {\n        var thisObj = this;\n        var column = item.data('undodelcolumn');\n        thisObj.elementRoot.find('.col_'+column).show();\n        // show undo button\n        item.remove();\n        e.stopPropagation();\n        return false;\n    };\n\n    /**\n     * Bind the event listeners we require.\n     *\n     * @method bindEventHandlers\n     */\n    Rowstable.prototype.bindEventHandlers = function() {\n        var thisObj = this;\n\n        // Bind a dblclick handler to the parent items.\n        this.deluttons.click(function(e) {\n            return thisObj.handleDeletion($(this), e);\n        });\n    };\n\n    return Rowstable;\n});\n"],"file":"rowstable.min.js"}